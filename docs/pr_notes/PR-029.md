# PR-029 — Personas: core/infra/docs

## Codex Pre-Flight

### Persona (pick one)
- [x] persona:core
- [ ] persona:infra
- [ ] persona:docs

### Scope Lock
- **Goal (one sentence):** Define Persona as a first-class contract with a deterministic registry so agents declare a persona (core/infra/docs) and the runtime can filter/validate persona assignments.
- **In-scope files:**
  - `packages/core/contracts/persona.py` (new)
  - `packages/core/contracts/__init__.py` (export new symbols)
  - `packages/core/persona_registry.py` (new)
  - `tests/test_persona.py` (new)
  - `tests/test_contract_package.py` (update expected exports)
- **Out-of-scope:**
  1. Runtime integration (agent execution filtered by persona) — deferred to PR-031+
  2. Any infra / deploy / VPS changes
  3. UI or platform-level persona logic

- **Behavior changes:**
  - [x] none (additive contracts + registry)

### Evidence
- PR description read: [x]
- CI failures read: N/A
- Relevant logs: N/A

### Plan
1. Create `packages/core/contracts/persona.py` with `PersonaType` literal, `PersonaSpec`, `PersonaAssignment`
2. Export symbols from contracts `__init__.py`
3. Create `packages/core/persona_registry.py` with `PersonaRegistry` in-memory store
4. Create tests in `tests/test_persona.py`
5. Update `tests/test_contract_package.py`

### Commands
- [x] `ruff check .`
- [x] `pytest -q`

### Safety
- New deps: no
- Secrets/env: no

### Exit Criteria
- [x] ruff PASS
- [x] pytest PASS
- [x] No scope creep
