# PR State Tracking

## 1) Current Snapshot
- Last updated: 2026-02-25
- Branch: feature/PR-061-070-org-billing
- HEAD: (pending commit)
- Last merged PR (per docs/PR_LOG.md): PR-070 — Billing webhooks
- Completed in this run: PR-061–070
- Next PR: PR-071 — Agent manifest
- Persona: persona:core
- Scope class: contracts/stubs/docs (billing FORBIDDEN per SCOPE.md)
- Checks: ruff=PASS, pytest=PASS (563 tests)
- Notes: Phase 8 complete — org/billing contracts + stubs only.

## 2) Completed (append-only)
- 2026-02-25 | PR-024.1 | Contract Package (schema-only) | in-scope | eff5b28 | ruff PASS | pytest PASS | docs+tests only, no deploy/integration changes
- 2026-02-25 | PR-024.2 | Version pinning & integration notes | in-scope | 85cf0be | ruff PASS | pytest PASS | docs-only policy and integration guidance
- 2026-02-25 | PR-024 | Agent registry v2 (register/enable/disable) | in-scope | 36539d0 | ruff PASS | pytest PASS | registry contracts+runtime lifecycle controls
- 2026-02-25 | PR-026 | Response contract schemas (agent/tool envelopes + errors) | in-scope | 24304c6 | ruff PASS | pytest PASS | contract schemas only, no runtime integration
- 2026-02-25 | PR-027 | Observability hooks (trace_id + tool-call log schema) | in-scope | 326b61c | ruff PASS | pytest PASS | schema/hooks only, no external backend integration
- 2026-02-25 | PR-028 | Safety gate hook (optional) | in-scope | c365580 | ruff PASS | pytest PASS | optional safety contracts+runtime pre-check hook
- 2026-02-25 | PR-028.1 | LLM adapter abstraction | in-scope | 96c3bc7 | ruff PASS | pytest PASS | contract/protocol/stub only, no provider integration
- 2026-02-25 | PR-028.2 | Prompt template system | in-scope | 66f8d9d | ruff PASS | pytest PASS | template contracts+registry rendering primitives
- 2026-02-25 | PR-028.3 | Prompt versioning | in-scope | f703a38 | ruff PASS | pytest PASS | versioned templates with latest fallback + explicit version
- 2026-02-25 | PR-029 | Personas: core/infra/docs | in-scope | (pending) | ruff PASS | pytest PASS | persona contracts+registry primitives
- 2026-02-25 | PR-030 | Routing rules v1 | in-scope | (pending) | ruff PASS | pytest PASS | rule-based intent router with keyword+regex matching
- 2026-02-25 | PR-031 | Tool permissions per persona | in-scope | (pending) | ruff PASS | pytest PASS | deny-first tool permission checker
- 2026-02-25 | PR-032 | Agent config loader | in-scope | (pending) | ruff PASS | pytest PASS | agent config contracts + dict-based loader
- 2026-02-25 | PR-033 | Docs Agent safe IO rules | in-scope | (pending) | ruff PASS | pytest PASS | canonical persona policies with least-privilege
- 2026-02-25 | PR-034 | Infra Agent ops guardrails | in-scope | (pending) | ruff PASS | pytest PASS | ops command guardrails with prefix allowlist + deny patterns
- 2026-02-25 | PR-035 | Execution pipeline v1 | in-scope | (pending) | ruff PASS | pytest PASS | pipeline contracts + runner with stop conditions
- 2026-02-25 | PR-036 | Short-term memory | in-scope | (pending) | ruff PASS | pytest PASS | in-memory key-value store for session data
- 2026-02-25 | PR-037 | Conversation state | in-scope | (pending) | ruff PASS | pytest PASS | deterministic conversation state + manager
- 2026-02-25 | PR-038 | Retry/timeout/abort | in-scope | (pending) | ruff PASS | pytest PASS | retry policy + executor with backoff/abort
- 2026-02-25 | PR-039 | Deterministic toggle | in-scope | (pending) | ruff PASS | pytest PASS | execution mode contract + resolve function
- 2026-02-25 | PR-040 | /agent/tools endpoint | in-scope | (pending) | ruff PASS | pytest PASS | tool listing API endpoint
- 2026-02-25 | PR-041 | /agent/health endpoint | in-scope | (pending) | ruff PASS | pytest PASS | agent subsystem health probe
- 2026-02-25 | PR-042 | Golden-path tests | in-scope | (pending) | ruff PASS | pytest PASS | 10 happy-path integration tests
- 2026-02-25 | PR-043 | Failure scenario tests | in-scope | (pending) | ruff PASS | pytest PASS | 10 error/edge-case tests
- 2026-02-25 | PR-044 | Smoke tests | in-scope | (pending) | ruff PASS | pytest PASS | 14 parametrized smoke tests
- 2026-02-25 | PR-044.1–044.10 | Workflow contracts | in-scope | (pending) | ruff PASS | pytest PASS | workflow schema v2 + conditions + parallel + HITL + state + audit + replay + export + visual
- 2026-02-25 | PR-044.11–044.13 | Auth contracts | in-scope | (pending) | ruff PASS | pytest PASS | API key + RBAC + rate limiting contracts/stubs
- 2026-02-25 | PR-044.14 | api.flowbiz.cloud | docs-only | (pending) | ruff PASS | pytest PASS | gateway design docs (out-of-scope implementation)
- 2026-02-25 | PR-045 | Versioned API (v1/v2) | in-scope | (pending) | ruff PASS | pytest PASS | v2 API router with /v2/meta endpoint
- 2026-02-25 | PR-046 | Webhook framework | in-scope | (pending) | ruff PASS | pytest PASS | webhook registration + payload + delivery contracts
- 2026-02-25 | PR-047 | Webhook retry & signature | in-scope | (pending) | ruff PASS | pytest PASS | HMAC-SHA256 signing + retry policy
- 2026-02-25 | PR-048 | Public SDK spec | docs-only | (pending) | ruff PASS | pytest PASS | SDK design docs (out-of-scope repos)
- 2026-02-25 | PR-049 | OpenAPI hardening | in-scope | (pending) | ruff PASS | pytest PASS | 10 OpenAPI schema validation tests
- 2026-02-25 | PR-050 | API deprecation policy | docs-only | (pending) | ruff PASS | pytest PASS | deprecation timeline + migration template
- 2026-02-25 | PR-051 | Metrics endpoint | in-scope | (pending) | ruff PASS | pytest PASS | metric contracts + in-memory collector
- 2026-02-25 | PR-052 | Prometheus exporter | in-scope | (pending) | ruff PASS | pytest PASS | text exposition format contract
- 2026-02-25 | PR-053 | Tracing (OpenTelemetry) | in-scope | (pending) | ruff PASS | pytest PASS | span/trace contracts + collector
- 2026-02-25 | PR-054 | Error aggregation | in-scope | (pending) | ruff PASS | pytest PASS | error grouping + aggregation contracts
- 2026-02-25 | PR-055 | Slow query tracking | in-scope | (pending) | ruff PASS | pytest PASS | threshold-based slow op tracking
- 2026-02-25 | PR-056 | Request analytics | in-scope | (pending) | ruff PASS | pytest PASS | HTTP request metrics + p95
- 2026-02-25 | PR-057 | Health dashboard | docs-only | (pending) | ruff PASS | pytest PASS | dashboard design docs (UI forbidden)
- 2026-02-25 | PR-058 | Alert rules | in-scope | (pending) | ruff PASS | pytest PASS | alert rule + event contracts
- 2026-02-25 | PR-059 | Uptime monitoring | in-scope | (pending) | ruff PASS | pytest PASS | uptime check + snapshot contracts
- 2026-02-25 | PR-060 | Incident runbook | docs-only | (pending) | ruff PASS | pytest PASS | operational incident guidance
- 2026-02-25 | PR-061 | Organization model | contracts/stubs | (pending) | ruff PASS | pytest PASS | org entity + in-memory store
- 2026-02-25 | PR-062 | Project / workspace | contracts/stubs | (pending) | ruff PASS | pytest PASS | project entity contract
- 2026-02-25 | PR-063 | Usage tracking | contracts/stubs | (pending) | ruff PASS | pytest PASS | usage record + summary + store
- 2026-02-25 | PR-064 | Quota system | contracts/stubs | (pending) | ruff PASS | pytest PASS | quota policy + check + stub checker
- 2026-02-25 | PR-065 | Billing abstraction | contracts/stubs | (pending) | ruff PASS | pytest PASS | billing account contract
- 2026-02-25 | PR-066 | Plan tiers | contracts/stubs | (pending) | ruff PASS | pytest PASS | plan definition contract
- 2026-02-25 | PR-067 | Invoice events | contracts/stubs | (pending) | ruff PASS | pytest PASS | invoice event contract
- 2026-02-25 | PR-068 | Cost attribution | contracts/stubs | (pending) | ruff PASS | pytest PASS | cost entry + report contracts
- 2026-02-25 | PR-069 | Usage dashboard | docs-only | (pending) | ruff PASS | pytest PASS | dashboard design docs (UI forbidden)
- 2026-02-25 | PR-070 | Billing webhooks | contracts/stubs | (pending) | ruff PASS | pytest PASS | billing webhook payload contract

## 3) Remaining (ordered)
- PR-071: Agent manifest
- PR-072: Tool manifest
- PR-073: Agent versioning
- PR-074: Agent sandbox
- PR-075: Permission isolation
- PR-076: Marketplace API
- PR-077: Agent rating
- PR-078: Agent install/update
- PR-079: Agent usage analytics
- PR-080: Marketplace UI API
- PR-081: Secrets manager
- PR-082: Key rotation
- PR-083: Audit log
- PR-084: Data masking
- PR-085: GDPR tools
- PR-086: Consent tracking
- PR-087: Access review
- PR-088: Security scan
- PR-089: Threat modeling
- PR-090: Compliance report
- PR-091: Async optimization
- PR-092: Caching layer
- PR-093: Queue backend
- PR-094: Worker autoscale
- PR-095: DB optimization
- PR-096: Read replica
- PR-097: Horizontal scaling
- PR-098: Load testing suite
- PR-099: Cost optimization
- PR-100: Scale readiness review
- PR-101: CLI tool
- PR-102: Local dev kit
- PR-103: Seed templates
- PR-104: Example agents
- PR-105: Example workflows
- PR-106: Docs site
- PR-107: API playground
- PR-108: SDK generators
- PR-109: Contribution guide
- PR-110: Onboarding flow
- PR-111: Slack connector
- PR-112: LINE OA connector
- PR-113: WhatsApp connector
- PR-114: Email agent
- PR-115: CRM integration
- PR-116: Payment gateway
- PR-117: Web app shell
- PR-118: Admin UI
- PR-119: Multi-tenant deploy
- PR-120: GA release
